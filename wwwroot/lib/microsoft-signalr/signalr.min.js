// SignalR JavaScript Client Library (Simplified Version)
(function(global) {
    'use strict';
    
    var signalR = global.signalR = {};
    
    function HubConnectionBuilder() {
        this._url = '';
        this._options = {};
    }
    
    HubConnectionBuilder.prototype.withUrl = function(url) {
        this._url = url;
        return this;
    };
    
    HubConnectionBuilder.prototype.withAutomaticReconnect = function() {
        return this;
    };
    
    HubConnectionBuilder.prototype.build = function() {
        return new HubConnection(this._url, this._options);
    };
    
    function HubConnection(url, options) {
        this._url = url;
        this._options = options || {};
        this._connection = null;
        this._handlers = {};
        this._isConnected = false;
    }
    
    HubConnection.prototype.start = function() {
        var self = this;
        return new Promise(function(resolve, reject) {
            try {
                // Simulate connection
                self._isConnected = true;
                setTimeout(function() {
                    resolve();
                }, 100);
            } catch (error) {
                reject(error);
            }
        });
    };
    
    HubConnection.prototype.stop = function() {
        var self = this;
        return new Promise(function(resolve) {
            self._isConnected = false;
            resolve();
        });
    };
    
    HubConnection.prototype.on = function(methodName, handler) {
        this._handlers[methodName] = handler;
    };
    
    HubConnection.prototype.invoke = function(methodName) {
        var args = Array.prototype.slice.call(arguments, 1);
        console.log('SignalR invoke:', methodName, args);
        return Promise.resolve();
    };
    
    HubConnection.prototype.onclose = function(handler) {
        this._onclose = handler;
    };
    
    HubConnection.prototype.onreconnecting = function(handler) {
        this._onreconnecting = handler;
    };
    
    HubConnection.prototype.onreconnected = function(handler) {
        this._onreconnected = handler;
    };
    
    signalR.HubConnectionBuilder = HubConnectionBuilder;
    
})(typeof window !== 'undefined' ? window : this);
