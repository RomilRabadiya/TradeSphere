@model IEnumerable<TradeSphere3.Models.Feedback>
    @{
    var trader = ViewBag.Trader as TradeSphere3.Models.Trader;
    ViewData["Title"] = $"Feedback for {trader?.Name}";
    string sortBy = ViewBag.SortBy ?? "date";
    bool isDesc = ViewBag.IsDesc ?? true;
    }

                      <div class="container py-4">
                          <div class="d-flex justify-content-between align-items-center mb-3">
                              <h2>Feedback for @trader?.Name</h2>

                              <div>
                                  <!-- Sort by Date -->
                                  <a asp-action="Feedback" asp-route-traderId="@trader?.TraderId" asp-route-sortBy="date" asp-route-desc="@(sortBy == "date" ? !isDesc : true)"
                                     class="btn btn-outline-primary btn-sm me-2">
                                      <i class="fas fa-sort"></i> Sort by Date (@(sortBy == "date" && isDesc ? "Oldest First" : "Newest First"))
                                  </a>

                                  <!-- Sort by Rating -->
                                  <a asp-action="Feedback" asp-route-traderId="@trader?.TraderId" asp-route-sortBy="rating" asp-route-desc="@(sortBy == "rating" ? !isDesc : true)"
                                     class="btn btn-outline-success btn-sm">
                                      <i class="fas fa-star"></i> Sort by Rating (@(sortBy == "rating" && isDesc ? "Lowest First" : "Highest First"))
                                  </a>
                              </div>
                          </div>

                          <hr />

                          @if (!Model.Any())
    {
                          <p class="text-muted">No feedback available for this trader yet.</p>
    }
    else
    {
                          <div class="list-group">
                              @foreach (var f in Model)
            {
                              <div class="list-group-item mb-3 shadow-sm rounded">
                                  <div class="d-flex justify-content-between align-items-center">
                                      <h5 class="mb-1">@f.Product?.Name</h5>

                                      <!-- Star Rating -->
                                      <div>
                                          @for (int i = 1; i <= 5; i++)
                            {
                                if (i <= f.Rating)
                                {
                                          <span class="text-warning">&#9733;</span>
                                }
                                else
                                {
                                          <span class="text-muted">&#9734;</span>
                                }
                            }
                                      </div>
                                  </div>

                                  <p class="mt-2">@f.Comment</p>

                                  <small class="text-muted">
                                      By @f.User?.Email on @f.ReviewDate.ToString("MMM dd, yyyy")
                                  </small>
                              </div>
            }
                          </div>
    }

                          @if(ViewBag.ProductFeedback==true)
                          {
                              <div class="mt-3">
                                  <a asp-controller="Product" asp-action="MyProducts" asp-route-id="@trader?.TraderId" class="btn btn-secondary">
                                      <i class="fas fa-arrow-left"></i> Back to Profile
                                  </a>
                              </div>
                          }
                          else
                          {
                              <div class="mt-3">
                                  <a asp-controller="TraderDirectory" asp-action="Details" asp-route-id="@trader?.TraderId" class="btn btn-secondary">
                                      <i class="fas fa-arrow-left"></i> Back to Profile
                                  </a>
                              </div>  
                          }
                      </div>
